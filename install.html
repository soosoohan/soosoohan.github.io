<!DOCTYPE html>
<html>
<head>
    <title>ìˆ˜ìˆ˜ëœë“œ ì„¤ì¹˜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background: linear-gradient(135deg, #145454, #2a8888);
            color: white;
        }
        .install-box {
            background: white;
            color: #145454;
            padding: 40px;
            border-radius: 20px;
            max-width: 400px;
            margin: 0 auto;
        }
        .install-btn {
            background: #145454;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            margin: 20px 0;
        }
        img {
            width: 150px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="install-box">
        <img src="/images/icon-237.jpeg" alt="Soosooland">
        <h1>ìˆ˜ìˆ˜ëœë“œ ì„¤ì¹˜</h1>
        <p>ë‘ë‡Œ ê²Œì„ í”Œë«í¼ì„ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”!</p>
        <button class="install-btn" id="installBtn">ğŸ“± ì§€ê¸ˆ ì„¤ì¹˜í•˜ê¸°</button>
        <p id="instruction" style="display:none; color: #666; font-size: 14px;">
            Safari: ê³µìœ ë²„íŠ¼ â†’ í™ˆ í™”ë©´ì— ì¶”ê°€<br>
            Chrome: ë©”ë‰´ â†’ í™ˆ í™”ë©´ì— ì¶”ê°€
        </p>
    </div>

    <script>
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
        const instruction = document.getElementById('instruction');

        // PWA ì„¤ì¹˜ ê°€ëŠ¥í•  ë•Œ
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });

        // ì„¤ì¹˜ ë²„íŠ¼ í´ë¦­
        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    // ì„¤ì¹˜ ì„±ê³µ
                    window.location.href = '/';
                }
                deferredPrompt = null;
            } else {
                // Safarië‚˜ ì´ë¯¸ ì„¤ì¹˜ëœ ê²½ìš°
                instruction.style.display = 'block';
                setTimeout(() => {
                    window.location.href = '/';
                }, 3000);
            }
        });

        // ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ ë©”ì¸ìœ¼ë¡œ
        if (window.matchMedia('(display-mode: standalone)').matches) {
            window.location.href = '/';
        }
    </script>
</body>
</html>
